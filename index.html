<!DOCTYPE html>
<html ng-app="SpeechRecognitionTest">
    <head>
        <title>Angular App | Angular Page | Angular Check List</title>

		<style>
			
			.checked {
				text-decoration: line-through;
				color: #000;
			}

			.itemList {
			  list-style-type: none;
			  width: 50%;
			}

		</style>

		<!-- Adding Favicon -->
		<link rel="icon" href="https://www.w3.org/html/logo/downloads/HTML5_Badge_512.png" type="image/gif" sizes="16x16">

		<!-- Import the angular.min.css from the CDN -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

		<!-- Import the angular.min.js from the CDN -->
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>

	    <!-- Importing Bootstrap from the CDN -->
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	    <!-- Import Annyang Speech Recognition Library from the CDN -->
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>

    </head>
    <body>

		<div ng-controller="SpeechRecognitionController">

			<div class="container">

    			<h3> A JavaScript Speech Recognition Bot </h3>
        	
		        <form name="checkList" ng-submit="addCheckListItem()">
		        	<input type="text" name="newItem" value="CheckListItem" ng-model="newItem" required>
		        	<input type="text" name="newItemCode" value="CheckListItemCode" ng-model="newItemCode" required>
		        	<!-- Add a new Check List Item. -->
		        	<button class="btn btn-primary" ng-disabled = checkList.$invalid> Add Item </button> 
		        </form>

		        <!-- Delete the checked Check List Items. -->
		        <button class="btn btn-danger" ng-click="deleteCheckListItem()"> Delete Item </button>

		        <hr />

		        <ul class="list-group itemList">
		        	<!-- The statement in ng-repeat loops through the CheckList array and does it according to array's index -->
		        	<li class="list-group-item" ng-repeat="item in CheckList track by $index"> 
		        		<!-- Mark the CheckBoxes with their indexes to access them easily using annyang's speech recognition -->
		        		{{$index + 1}}
		        		<input type="checkbox" ng-model="item.checked">
		        		<!-- String Interpolation  -->
		        		<span ng-class="{'checked': item.checked}"> {{item.itemName}} </span>
		        		<!-- Number Interpolation  -->
		        		<span ng-class="{'checked': item.checked}" class="badge"> {{item.itemCode}} </span>
		        	</li>
		        </ul>

	        </div>

        </div>


        <script>
        	
        	//We create an instance of the Angular Controller after creating an AngularModule.
        	//We use the $scope object to refer to the application model.
        	angular.module('SpeechRecognitionTest', []).controller('SpeechRecognitionController', ['$scope', function($scope) {


        		//We create a checkList array based on the scope or life of the controller.
        		$scope.CheckList = [
        			{
        				'itemName': 'Learn Python', 
        				'checked': false,
        				'itemCode': 'CS101'
        			},
        			{
        				'itemName': 'Learn Java', 
        				'checked': false,
        				'itemCode': 'CS103'
        			},
        			{
        				'itemName': 'Learn C#', 
        				'checked': false,
        				'itemCode': 'CS105'
        			}
        		]

        		//We create a addCheckListItem method to add the item to the checkList.
        		$scope.addCheckListItem = function() {

        			$scope.CheckList.push({
        				'itemName': $scope.newItem,
        				'checked': false,
        				'itemCode': $scope.newItemCode,
        			})

        			//Re-Initialise the newItem and newItemCode.
        			$scope.newItem = '';
        			$scope.newItemCode = '';

        		}

				//We create a deleteCheckListItem method to add the item to the checkList.
        		$scope.deleteCheckListItem = function() {

        			//Delete the Check List Items that are checked.
        			//The filter method is used to filter the array CheckList based on the checked items.
        			$scope.CheckList = $scope.CheckList.filter( function(value) {
        				return !value.checked;
        			})

        		} 

        		//These are the commands to be given to annyang.
        		var commands = {
        			//Once it reads 'new item', the following words would be the itemName and the itemCode.
        			'new item *text *code' : function(text, code) {
        				//Add the obtained itemName and itemCode to the newItem object.
        				$scope.newItem = text;
        				$scope.newItemCode = code;
        				//Add the newItem to the CheckList.
        				$scope.addCheckListItem();
        				$scope.$apply();
        			}
        		}

        		//Annyang adds the commands to the queue.
        		annyang.addCommands( commands );
        		//Annayng gets the debugger console.
        		annyang.debug();
        		//Annyang starts the listening
        		annyang.start();

        	}])

        </script>

       
        
    </body>
</html>